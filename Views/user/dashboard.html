<!DOCTYPE html>
<html lang="es">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>CalorEase - Dashboard</title>
        <link rel="stylesheet" href="../../assets/css/dashboard.css" />
        <style>
            .modal-comidas {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                z-index: 9999;
                width: 100vw;
                height: 100vh;
                background: rgba(0, 0, 0, 0.6);
                justify-content: center;
                align-items: center;
            }

            .modal-contenido {
                background: white;
                padding: 20px;
                border-radius: 10px;
                width: 90%;
                max-width: 600px;
                position: relative;
                max-height: 80vh;
                overflow-y: auto;
            }

            .modal-contenido h3 {
                margin-top: 0;
            }

            .modal-close {
                position: absolute;
                top: 10px;
                right: 15px;
                background: none;
                border: none;
                font-size: 20px;
                cursor: pointer;
                color: #333;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 10px;
            }

            th,
            td {
                border: 1px solid #ccc;
                padding: 8px;
                text-align: left;
            }

            th {
                background: #f0f0f0;
            }
        </style>
    </head>

    <body>
        <nav>
            <div class="nav-left">
                <div class="dropdown">
                    <span style="cursor: pointer">Objetivos &#x25BC;</span>
                    <div class="dropdown-content">
                        <a href="#">Semanales</a>
                        <a href="#">Diarios</a>
                    </div>
                </div>
                <a href="#">Comidas Favoritas</a>
                <a href="#">Comunidad</a>
                <span id="nombre-usuario"></span>
            </div>
            <div class="nav-right">
                <div class="profile"></div>
            </div>
        </nav>

        <div class="container">
            <div class="imc-section">
                <h1>IMC</h1>
                <p>(√çndice Masa Corporal)</p>
                <div class="bar" id="barra-imc"></div>
                <p id="valor-imc"></p>
            </div>

            <div class="kcal-section">
                <div class="kcal-circle">
                    <span id="consumo-kcal">0kcal</span>
                    <small>Objetivo: <span id="objetivo-kcal">2000</span>kcal</small>
                </div>
                <div>
                    <button class="btn" id="btn-agregar-comida">Agregar comida</button>
                    <button class="btn" id="btn-ver-comidas">Ver mis comidas</button>
                </div>
            </div>

            <div class="macros">
                <div class="macro" id="macro-proteinas">
                    Prote√≠na<br />
                    0gr<br />
                    Objetivo: <span id="objetivo-proteinas">100</span>gr
                </div>
                <div class="macro" id="macro-carbs">
                    Carbohidratos<br />
                    0gr<br />
                    Objetivo: <span id="objetivo-carbs">150</span>gr
                </div>
                <div class="macro" id="macro-grasas">
                    Grasas<br />
                    0gr<br />
                    Objetivo: <span id="objetivo-grasas">40</span>gr
                </div>
            </div>
        </div>

        <!-- üßæ Modal de lista de comidas -->
        <div class="modal-comidas" id="popup-comidas">
            <div class="modal-contenido">
                <button class="modal-close" onclick="cerrarPopupComidas()">‚úñ</button>
                <h3>Mis Comidas Registradas</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Plato</th>
                            <th>Fecha</th>
                            <th>Cantidad</th>
                            <th>Calor√≠as</th>
                            <th>Prote√≠nas</th>
                            <th>Carbs</th>
                            <th>Grasas</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-comidas"></tbody>
                </table>
            </div>
        </div>

        <!-- Modal agregar comida (ya existente) -->
        <div id="modalComida" style="display: none">
            <div class="modal-content">
                <h2>Agregar Comida</h2>
                <input type="text" placeholder="Comida:" />
                <input type="text" placeholder="Cantidad:" />
                <button class="btn" onclick="agregarALista()">Agregar a lista</button>
                <button class="btn" onclick="verLista()">Ver lista</button><br /><br />
                <button class="btn" onclick="cerrarModal()">Cerrar</button>
            </div>
        </div>





        <!-- POPUP DE SELECCION DE COMIDA, AGREGAR AUTOMATICA O MANUAL PARA CARGA A LA IA -->



        <div id="popup-agregar-comida" class="popup" style="display: none;">
            <div class="popup-contenido">
                <h2>Agregar nueva comida</h2>
                <p>Escribe qu√© comiste. Esta informaci√≥n ser√° analizada por una IA para estimar sus valores
                    nutricionales.</p>

                <textarea id="descripcion-comida" rows="4"
                    placeholder="Ejemplo: Me com√≠ una hamburguesa con papas fritas y una Coca-Cola."></textarea>

                <button id="btn-modo-manual">Ingresar datos manualmente</button>

                <div id="campos-manuales" style="display: none; margin-top: 10px;">
                    <input type="number" placeholder="Calor√≠as (kcal)" id="input-calorias" />
                    <input type="number" placeholder="Prote√≠nas (g)" id="input-proteinas" />
                    <input type="number" placeholder="Carbohidratos (g)" id="input-carbohidratos" />
                    <input type="number" placeholder="Grasas (g)" id="input-grasas" />
                </div>

                <div style="margin-top: 10px;">
                    <button id="btn-enviar-comida">Enviar</button>
                    <button onclick="cerrarPopupAgregarComida()">Cancelar</button>
                </div>
            </div>
        </div>

        <script src="../../assets/javascript/dashboard.js"></script>
    </body>

</html>